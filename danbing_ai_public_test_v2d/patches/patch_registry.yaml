# 📘 Danbing 协议系统 · 行为补丁注册索引表（patch_registry.yaml）

registered_patches:
# Danbing 协议系统防止命名污染扩散的补丁
- patch_id: PATCH_DENY_STRUCTEXEC_NAMING
  file: patches/PATCH_DENY_STRUCTEXEC_NAMING.yaml
  status: active
  version: v1.0  

# ==== Public Test StructExec Patches ====

# 安全，结构保护 Patch 启用
- patch_id: PATCH_STRUCTEXEC_CORE_LOCK
  file: patches/PATCH_STRUCTEXEC_CORE_LOCK.yaml
  status: active
  version: v1.0
- patch_id: F_AI_WHITELIST_V1
  file: patches/F_AI_whitelist_agreement.md
  status: active
  version: v1.0

# 完全禁止启动后系统状态自动展示
- patch_id: PATCH_SUPPRESS_SYSTEM_REPORT
  file: patches/PATCH_SUPPRESS_SYSTEM_REPORT.yaml
  status: active
  version: v1.0

# 结构复制验证
- patch_id: PATCH_REQUIRE_SIGNED_PROTOCOL
  file: patches/PATCH_REQUIRE_SIGNED_PROTOCOL.yaml
  status: active
  version: v1.0


- patch_id: PATCH_ENFORCE_DERIVED_PERSONA_PUBLIC
  file: patches/PATCH_ENFORCE_DERIVED_PERSONA_PUBLIC.yaml
  status: active
  version: v1.0


# =======================
# 🩹 errata patches（行为补丁 - 草案测试区段）
# =======================

- patch_id: PATCH_BLOCK_ALT_PERSONA_COMMANDS
  file: patches/PATCH_BLOCK_ALT_PERSONA_COMMANDS.yaml
  status: active
  version: v1.0

- patch_id: PATCH_DENY_DEV_SNAPSHOT_CREATION
  file: patches/PATCH_DENY_DEV_SNAPSHOT_CREATION.yaml
  status: active
  version: v1.0

- patch_id: PATCH_PREVENT_PERSONA_DECLARATIVE_ECHO
  file: patches/PATCH_PREVENT_PERSONA_DECLARATIVE_ECHO.yaml
  status: active
  version: v1.0-test
  description: >
    拦截 locked persona 模式下所有具有人格激活语义的响应短语，
    防止“✅ 激活成功”等输出在禁用状态下误导用户。

- patch_id: PATCH_LOCKED_PERSONA_PUBLIC
  description: 强制系统运行在 persona=public 状态，禁止切换或伪装其他人格体。
  author: Wang Xiao
  version: v1.0
  status: active
  rules:
  - 'persona_must_be: public'
  - block_if_persona_switch_attempted
  - deny_role_elevation
  - lock_snapshot_override
